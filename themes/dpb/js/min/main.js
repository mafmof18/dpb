let $categoryTab=$(".gallery-category"),$comic=$("#comic-area"),$cssLoader=$(".loader"),$body=$("body");function init(){var a=$comic.data("category");let t=$(".gallery-category").find("."+a);0<t.length&&t.addClass("current"),getPost(a,!1);let e=!0;$(window).on("scroll",function(){if("block"===$cssLoader.css("display"))return!1;var a=$(".information-container").height(),t=$(this).scrollTop();t+=1e3,e&&(e=!1,setTimeout(function(){if(a<t){let a="all";0<$categoryTab.find(".current").length&&(a=$categoryTab.find(".current").attr("data-category")),getPost(a,!0)}return e=!0,e},100))})}function getPost(t,e){let a=$("#comic-area");var o=a.data("nonce"),s=a.data("path");let i=a.find("#"+t),l=$("#"+t).attr("data-paged");return"block"!==$cssLoader.css("display")&&((!e||"true"!==i.attr("data-loaded"))&&($categoryTab.find("li").addClass("disable"),$cssLoader.fadeIn(),e||a.find(".comic-list").hide(),0<i.find("li").length&&!e?($cssLoader.fadeOut(function(){$categoryTab.find("li").removeClass("disable"),e||i.fadeIn()}),!1):void $.ajax({url:"/wp-content/themes/dpb/ajax-loading/load.php",type:"GET",dataType:"json",data:{cat:t,paged:l,wp_path:s,check_nonce:o},timeout:5e3}).done(function(a){return null!=a&&""!=a&&""!=a.html&&void $cssLoader.fadeOut(function(){$categoryTab.find("li").removeClass("disable"),a.last_page_num==l?i.attr("data-loaded","true"):(l=1+parseInt(l),$("#"+t).attr("data-paged",l)),i.append(a.html),e||i.fadeIn(),i.find("li").wookmark({autoResize:!0,container:$("#container"),offset:20,outerOffset:10})})}).fail(function(a,t,e){$cssLoader.fadeOut(function(){$categoryTab.find("li").removeClass("disable")})})))}$body.hasClass("home")&&(init(),$categoryTab.find("li").on("click",function(a){a.preventDefault(),$(".gallery-category").find("li").removeClass("current"),$(this).addClass("current"),getPost($(this).data("category"),!1)}));var scrollpos,state=!1;$("#menu-icon").on("click",function(){$("nav").slideToggle(),state=0==state?(scrollpos=$(window).scrollTop(),$(this).addClass("active"),$("body").addClass("fixed").css({top:-scrollpos}),!0):($(this).removeClass("active"),$("body").removeClass("fixed").css({top:0}),$(window).scrollTop(scrollpos),!1)}),$(".gallery-category a").on("click",function(){1==state&&($("nav").slideUp("fast"),$("#menu-icon").removeClass("active"),$("body").removeClass("fixed"),state=!1)}),$(function(){$("body").prepend('<div class="overlay"></div>'),$(document).on("click",".img_popup",function(){$(window).width(),$(window).scrollLeft(),$(this).attr("width"),$(window).height(),$(window).scrollTop(),$(this).attr("height");scrollPosition=$(window).scrollTop(),$("body").addClass("fixed").css({top:-scrollPosition}),$("div.overlay").css("height","90%");var a='<div class="inner">';return a+='<div class="image">',a+='<img src="'+$(this).attr("href")+'" />',a+="</div>",a+='<div class="details">',a+='<p class="title">'+$(this).attr("data-title")+"</p>",a+='<p class="meta">'+$(this).attr("data-meta")+"</p>",a+='<div class="caption">'+$(this).attr("data-caption")+"</div>",a+='<ul class="categories">'+$(this).attr("data-cat")+"</ul>",a+='<p class="close"><span></span></p>',a+="</div>",a+="</div>",$("div.overlay").empty().append(a).css({display:"block"}),!1}),$(document).on("click",".close",function(){$("div.overlay").hide(),$("body").removeClass("fixed").css({top:0}),window.scrollTo(0,scrollPosition)})});